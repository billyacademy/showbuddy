<div class="center-white">
  <h1> Guest List </h1>
  <% @rsvps.each do |rsvp| %>
    <% if rsvp.concert_id == params[:id].to_i && rsvp.user_id != current_user.id %>
    <%= rsvp.user.name %><br>
    <%= image_tag rsvp.user.image %>
    <%= rsvp.comment %>
      <% if Match.find_by(sender_id: current_user.id, concert_id: params[:id], receiver_id: rsvp.user.id).nil? &&
        Match.find_by(sender_id: rsvp.user.id, concert_id: params[:id], receiver_id: current_user.id).nil?  %>
        <%= button_to "Buddy up!", concert_matches_path(params[:id], rsvp.user_id) %>
      <% elsif Match.find_by(sender_id: current_user.id, concert_id: params[:id], receiver_id: rsvp.user.id).try(:status) == 'declined'||
        Match.find_by(sender_id: rsvp.user.id, concert_id: params[:id], receiver_id: current_user.id).try(:status) == 'declined' %>
        <br><%= "Declined" %>
      <% elsif Match.find_by(sender_id: current_user.id, concert_id: params[:id], receiver_id: rsvp.user.id).try(:status) == 'confirmed'||
        Match.find_by(sender_id: rsvp.user.id, concert_id: params[:id], receiver_id: current_user.id).try(:status) == 'confirmed' %>
        <br><%= "Successful Match!" %>
      <% else %>
        <br><%= "Request Pending..." %>

      <% end %>
    <% end %>
  <br>
<% end %>
